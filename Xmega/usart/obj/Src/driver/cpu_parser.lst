   1               		.file	"cpu_parser.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__CCP__ = 0x34
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
  10               		.text
  11               	.Ltext0:
 507               	.global	CRC8_CPU
 509               	CRC8_CPU:
 510               		.stabd	46,0,0
   1:Src/driver/cpu_parser.c **** //***************************************************************************
   2:Src/driver/cpu_parser.c **** // Copyright (C) 2017 Laboratório de Sistemas e Tecnologia Subaquática      *
   3:Src/driver/cpu_parser.c **** // Departamento de Engenharia Electrotécnica e de Computadores              *
   4:Src/driver/cpu_parser.c **** // Rua Dr. Roberto Frias, 4200-465 Porto, Portugal                          *
   5:Src/driver/cpu_parser.c **** //***************************************************************************
   6:Src/driver/cpu_parser.c **** // Author: Pedro Gonçalves                                                  *
   7:Src/driver/cpu_parser.c **** //***************************************************************************
   8:Src/driver/cpu_parser.c **** 
   9:Src/driver/cpu_parser.c **** #include <stdio.h>
  10:Src/driver/cpu_parser.c **** #include <stdlib.h>
  11:Src/driver/cpu_parser.c **** #include <avr/io.h>
  12:Src/driver/cpu_parser.c **** #include <avr/interrupt.h>
  13:Src/driver/cpu_parser.c **** #include <util/delay.h>
  14:Src/driver/cpu_parser.c **** #include <avr/pgmspace.h>
  15:Src/driver/cpu_parser.c **** #include <stdbool.h>
  16:Src/driver/cpu_parser.c **** 
  17:Src/driver/cpu_parser.c **** #include "../../Inc/driver/uart.h"
  18:Src/driver/cpu_parser.c **** #include "../../Inc/driver/io.h"
  19:Src/driver/cpu_parser.c **** #include "../../Inc/driver/cpu_parser.h"
  20:Src/driver/cpu_parser.c **** #include "../../config.h"
  21:Src/driver/cpu_parser.c **** 
  22:Src/driver/cpu_parser.c **** const char *state_mode = "s";
  23:Src/driver/cpu_parser.c **** const char *all_mode = "a";
  24:Src/driver/cpu_parser.c **** bool is_preamble = true;
  25:Src/driver/cpu_parser.c **** char text_to_send_cpu[16];
  26:Src/driver/cpu_parser.c **** 
  27:Src/driver/cpu_parser.c **** uint8_t csum_cpu;
  28:Src/driver/cpu_parser.c **** uint8_t parser_mode = PARSER;
  29:Src/driver/cpu_parser.c **** 
  30:Src/driver/cpu_parser.c **** char data_cpu_rx[UART_RX_BUF_SIZE];
  31:Src/driver/cpu_parser.c **** char data_cpu_cmd[UART_RX_BUF_SIZE];
  32:Src/driver/cpu_parser.c **** 
  33:Src/driver/cpu_parser.c **** uint8_t cnt_cpu = 0;
  34:Src/driver/cpu_parser.c **** 
  35:Src/driver/cpu_parser.c **** bool new_command = false;
  36:Src/driver/cpu_parser.c **** 
  37:Src/driver/cpu_parser.c **** enum
  38:Src/driver/cpu_parser.c **** {
  39:Src/driver/cpu_parser.c ****     START = 'S',
  40:Src/driver/cpu_parser.c ****     STOP = 'P'
  41:Src/driver/cpu_parser.c **** };
  42:Src/driver/cpu_parser.c **** 
  43:Src/driver/cpu_parser.c **** uint8_t CRC8_CPU(unsigned char *data)
  44:Src/driver/cpu_parser.c **** {
 512               	.LM0:
 513               	.LFBB1:
 514               	/* prologue: function */
 515               	/* frame size = 0 */
 516               	/* stack size = 0 */
 517               	.L__stack_usage = 0
 518 0000 AC01      		movw r20,r24
  45:Src/driver/cpu_parser.c ****     uint8_t csum = 0x00;
  46:Src/driver/cpu_parser.c ****     uint8_t t = 0;
 520               	.LM1:
 521 0002 20E0      		ldi r18,0
  45:Src/driver/cpu_parser.c ****     uint8_t csum = 0x00;
 523               	.LM2:
 524 0004 80E0      		ldi r24,0
 525               	.L2:
  47:Src/driver/cpu_parser.c ****     while (data[t] != '*')
 527               	.LM3:
 528 0006 FA01      		movw r30,r20
 529 0008 E20F      		add r30,r18
 530 000a F11D      		adc r31,__zero_reg__
 531 000c 3081      		ld r19,Z
 532 000e 3A32      		cpi r19,lo8(42)
 533 0010 01F0      		breq .L5
  48:Src/driver/cpu_parser.c ****     {
  49:Src/driver/cpu_parser.c ****         csum ^= data[t];
 535               	.LM4:
 536 0012 8327      		eor r24,r19
  50:Src/driver/cpu_parser.c ****         t++;
 538               	.LM5:
 539 0014 2F5F      		subi r18,lo8(-(1))
 540 0016 00C0      		rjmp .L2
 541               	.L5:
  51:Src/driver/cpu_parser.c ****     }
  52:Src/driver/cpu_parser.c ****     //(csum | 0x80)
  53:Src/driver/cpu_parser.c ****     return (csum | 0x80);
  54:Src/driver/cpu_parser.c **** }
 543               	.LM6:
 544 0018 8068      		ori r24,lo8(-128)
 545 001a 0895      		ret
 551               	.Lscope1:
 553               		.stabd	78,0,0
 554               		.section	.rodata.str1.1,"aMS",@progbits,1
 555               	.LC0:
 556 0000 2573 00   		.string	"%s"
 557               		.text
 560               	.global	cpu_parser
 562               	cpu_parser:
 563               		.stabd	46,0,0
  55:Src/driver/cpu_parser.c **** 
  56:Src/driver/cpu_parser.c **** void cpu_parser(uint8_t data)
  57:Src/driver/cpu_parser.c **** {
 565               	.LM7:
 566               	.LFBB2:
 567 001c CF93      		push r28
 568               	/* prologue: function */
 569               	/* frame size = 0 */
 570               	/* stack size = 1 */
 571               	.L__stack_usage = 1
 572 001e C82F      		mov r28,r24
  58:Src/driver/cpu_parser.c ****     if (parser_mode == PARSER)
 574               	.LM8:
 575 0020 8091 0000 		lds r24,parser_mode
 576 0024 8111      		cpse r24,__zero_reg__
 577 0026 00C0      		rjmp .L7
  59:Src/driver/cpu_parser.c ****     {
  60:Src/driver/cpu_parser.c ****         if (data == '@')
 579               	.LM9:
 580 0028 C034      		cpi r28,lo8(64)
 581 002a 01F0      		breq .+2
 582 002c 00C0      		rjmp .L6
  61:Src/driver/cpu_parser.c ****         {
  62:Src/driver/cpu_parser.c ****             cnt_cpu = 0;
 584               	.LM10:
 585 002e 1092 0000 		sts cnt_cpu,__zero_reg__
  63:Src/driver/cpu_parser.c ****             memset(&data_cpu_rx, '\0', sizeof(data_cpu_rx));
 587               	.LM11:
 588 0032 40E2      		ldi r20,lo8(32)
 589 0034 50E0      		ldi r21,0
 590 0036 60E0      		ldi r22,0
 591 0038 70E0      		ldi r23,0
 592 003a 80E0      		ldi r24,lo8(data_cpu_rx)
 593 003c 90E0      		ldi r25,hi8(data_cpu_rx)
 594 003e 0E94 0000 		call memset
  64:Src/driver/cpu_parser.c ****             data_cpu_rx[cnt_cpu] = data;
 596               	.LM12:
 597 0042 8091 0000 		lds r24,cnt_cpu
 598 0046 E82F      		mov r30,r24
 599 0048 F0E0      		ldi r31,0
 600 004a E050      		subi r30,lo8(-(data_cpu_rx))
 601 004c F040      		sbci r31,hi8(-(data_cpu_rx))
 602 004e C083      		st Z,r28
  65:Src/driver/cpu_parser.c ****             cnt_cpu++;
 604               	.LM13:
 605 0050 8F5F      		subi r24,lo8(-(1))
 606 0052 8093 0000 		sts cnt_cpu,r24
  66:Src/driver/cpu_parser.c ****             parser_mode = DATA;
 608               	.LM14:
 609 0056 81E0      		ldi r24,lo8(1)
 610 0058 8093 0000 		sts parser_mode,r24
 611 005c 00C0      		rjmp .L11
 612               	.L7:
  67:Src/driver/cpu_parser.c ****             csum_cpu = data;
  68:Src/driver/cpu_parser.c ****         }
  69:Src/driver/cpu_parser.c ****     }
  70:Src/driver/cpu_parser.c ****     else if (parser_mode == DATA)
 614               	.LM15:
 615 005e 8130      		cpi r24,lo8(1)
 616 0060 01F4      		brne .L9
 617 0062 E091 0000 		lds r30,cnt_cpu
  71:Src/driver/cpu_parser.c ****     {
  72:Src/driver/cpu_parser.c ****         //spew("DATA\n", data);
  73:Src/driver/cpu_parser.c ****         if (data == '*')
 619               	.LM16:
 620 0066 CA32      		cpi r28,lo8(42)
 621 0068 01F4      		brne .L10
  74:Src/driver/cpu_parser.c ****         {
  75:Src/driver/cpu_parser.c ****             parser_mode = CSUM;
 623               	.LM17:
 624 006a 82E0      		ldi r24,lo8(2)
 625 006c 8093 0000 		sts parser_mode,r24
  76:Src/driver/cpu_parser.c ****             data_cpu_rx[cnt_cpu] = data;
 627               	.LM18:
 628 0070 F0E0      		ldi r31,0
 629 0072 E050      		subi r30,lo8(-(data_cpu_rx))
 630 0074 F040      		sbci r31,hi8(-(data_cpu_rx))
 631 0076 C083      		st Z,r28
 632 0078 00C0      		rjmp .L6
 633               	.L10:
  77:Src/driver/cpu_parser.c ****             //verifica cnt_cpu < buf
  78:Src/driver/cpu_parser.c ****         }
  79:Src/driver/cpu_parser.c ****         else
  80:Src/driver/cpu_parser.c ****         {
  81:Src/driver/cpu_parser.c ****             data_cpu_rx[cnt_cpu] = data;
 635               	.LM19:
 636 007a AE2F      		mov r26,r30
 637 007c B0E0      		ldi r27,0
 638 007e A050      		subi r26,lo8(-(data_cpu_rx))
 639 0080 B040      		sbci r27,hi8(-(data_cpu_rx))
 640 0082 CC93      		st X,r28
  82:Src/driver/cpu_parser.c ****             cnt_cpu++;
 642               	.LM20:
 643 0084 EF5F      		subi r30,lo8(-(1))
 644 0086 E093 0000 		sts cnt_cpu,r30
  83:Src/driver/cpu_parser.c ****             csum_cpu ^= data;
 646               	.LM21:
 647 008a 8091 0000 		lds r24,csum_cpu
 648 008e C827      		eor r28,r24
 649               	.L11:
 650 0090 C093 0000 		sts csum_cpu,r28
 651 0094 00C0      		rjmp .L6
 652               	.L9:
  84:Src/driver/cpu_parser.c ****         }
  85:Src/driver/cpu_parser.c ****     }
  86:Src/driver/cpu_parser.c ****     else if (parser_mode == CSUM)
 654               	.LM22:
 655 0096 8230      		cpi r24,lo8(2)
 656 0098 01F4      		brne .L6
  87:Src/driver/cpu_parser.c ****     {
  88:Src/driver/cpu_parser.c ****         //if (csum_cpu == data)
  89:Src/driver/cpu_parser.c ****         //{
  90:Src/driver/cpu_parser.c ****         data_cpu_rx[cnt_cpu] = '\0';
 658               	.LM23:
 659 009a 80E0      		ldi r24,lo8(data_cpu_rx)
 660 009c 90E0      		ldi r25,hi8(data_cpu_rx)
 661 009e E091 0000 		lds r30,cnt_cpu
 662 00a2 F0E0      		ldi r31,0
 663 00a4 E050      		subi r30,lo8(-(data_cpu_rx))
 664 00a6 F040      		sbci r31,hi8(-(data_cpu_rx))
 665 00a8 1082      		st Z,__zero_reg__
  91:Src/driver/cpu_parser.c ****         sprintf(data_cpu_cmd, "%s", data_cpu_rx);
 667               	.LM24:
 668 00aa 9F93      		push r25
 669 00ac 8F93      		push r24
 670 00ae 80E0      		ldi r24,lo8(.LC0)
 671 00b0 90E0      		ldi r25,hi8(.LC0)
 672 00b2 9F93      		push r25
 673 00b4 8F93      		push r24
 674 00b6 80E0      		ldi r24,lo8(data_cpu_cmd)
 675 00b8 90E0      		ldi r25,hi8(data_cpu_cmd)
 676 00ba 9F93      		push r25
 677 00bc 8F93      		push r24
 678 00be 0E94 0000 		call sprintf
  92:Src/driver/cpu_parser.c ****         new_command = true;
 680               	.LM25:
 681 00c2 81E0      		ldi r24,lo8(1)
 682 00c4 8093 0000 		sts new_command,r24
  93:Src/driver/cpu_parser.c ****         //}
  94:Src/driver/cpu_parser.c ****         parser_mode = PARSER;
 684               	.LM26:
 685 00c8 1092 0000 		sts parser_mode,__zero_reg__
 686 00cc 0F90      		pop __tmp_reg__
 687 00ce 0F90      		pop __tmp_reg__
 688 00d0 0F90      		pop __tmp_reg__
 689 00d2 0F90      		pop __tmp_reg__
 690 00d4 0F90      		pop __tmp_reg__
 691 00d6 0F90      		pop __tmp_reg__
 692               	.L6:
 693               	/* epilogue start */
  95:Src/driver/cpu_parser.c ****     }
  96:Src/driver/cpu_parser.c **** }
 695               	.LM27:
 696 00d8 CF91      		pop r28
 697 00da 0895      		ret
 699               	.Lscope2:
 701               		.stabd	78,0,0
 702               		.section	.rodata.str1.1
 703               	.LC1:
 704 0003 7061 7273 		.string	"parse_cpu_data_rx: %s\n"
 704      655F 6370 
 704      755F 6461 
 704      7461 5F72 
 704      783A 2025 
 705               	.LC2:
 706 001a 2C00      		.string	","
 707               	.LC3:
 708 001c 3120 2D20 		.string	"1 - %d\n"
 708      2564 0A00 
 709               	.LC4:
 710 0024 3220 2D20 		.string	"2 - %d\n"
 710      2564 0A00 
 711               	.LC5:
 712 002c 3320 2D20 		.string	"3 - %d\n"
 712      2564 0A00 
 713               		.text
 715               	.global	parse_cpu_data_rx
 717               	parse_cpu_data_rx:
 718               		.stabd	46,0,0
  97:Src/driver/cpu_parser.c **** 
  98:Src/driver/cpu_parser.c **** void parse_cpu_data_rx(char *data_rx)
  99:Src/driver/cpu_parser.c **** {
 720               	.LM28:
 721               	.LFBB3:
 722 00dc EF92      		push r14
 723 00de FF92      		push r15
 724 00e0 0F93      		push r16
 725 00e2 1F93      		push r17
 726 00e4 CF93      		push r28
 727 00e6 DF93      		push r29
 728 00e8 CDB7      		in r28,__SP_L__
 729 00ea DEB7      		in r29,__SP_H__
 730 00ec A297      		sbiw r28,34
 731 00ee CDBF      		out __SP_L__,r28
 732 00f0 DEBF      		out __SP_H__,r29
 733               	/* prologue: function */
 734               	/* frame size = 34 */
 735               	/* stack size = 40 */
 736               	.L__stack_usage = 40
 737 00f2 8C01      		movw r16,r24
 100:Src/driver/cpu_parser.c ****     spew("parse_cpu_data_rx: %s\n", data_rx);
 739               	.LM29:
 740 00f4 1F93      		push r17
 741 00f6 8F93      		push r24
 742 00f8 80E0      		ldi r24,lo8(.LC1)
 743 00fa 90E0      		ldi r25,hi8(.LC1)
 744 00fc 9F93      		push r25
 745 00fe 8F93      		push r24
 746 0100 0E94 0000 		call spew
 101:Src/driver/cpu_parser.c ****     char *word = strtok(data_rx, ",");
 748               	.LM30:
 749 0104 60E0      		ldi r22,lo8(.LC2)
 750 0106 70E0      		ldi r23,hi8(.LC2)
 751 0108 C801      		movw r24,r16
 752 010a 0E94 0000 		call strtok
 102:Src/driver/cpu_parser.c ****     char pre_mode[2];
 103:Src/driver/cpu_parser.c ****     sprintf(pre_mode, "%s", word);
 754               	.LM31:
 755 010e 9F93      		push r25
 756 0110 8F93      		push r24
 757 0112 00E0      		ldi r16,lo8(.LC0)
 758 0114 10E0      		ldi r17,hi8(.LC0)
 759 0116 1F93      		push r17
 760 0118 0F93      		push r16
 761 011a 7E01      		movw r14,r28
 762 011c 81E2      		ldi r24,33
 763 011e E80E      		add r14,r24
 764 0120 F11C      		adc r15,__zero_reg__
 765 0122 FF92      		push r15
 766 0124 EF92      		push r14
 767 0126 0E94 0000 		call sprintf
 104:Src/driver/cpu_parser.c **** 
 105:Src/driver/cpu_parser.c ****     switch (pre_mode[1])
 769               	.LM32:
 770 012a CDBF      		out __SP_L__,r28
 771 012c DEBF      		out __SP_H__,r29
 772 012e 8AA1      		ldd r24,Y+34
 773 0130 8035      		cpi r24,lo8(80)
 774 0132 01F4      		brne .+2
 775 0134 00C0      		rjmp .L14
 776 0136 8335      		cpi r24,lo8(83)
 777 0138 01F0      		breq .+2
 778 013a 00C0      		rjmp .L12
 779               	.LBB4:
 106:Src/driver/cpu_parser.c ****     {
 107:Src/driver/cpu_parser.c ****     case START:
 108:Src/driver/cpu_parser.c ****         word = strtok(NULL, ",");
 781               	.LM33:
 782 013c 60E0      		ldi r22,lo8(.LC2)
 783 013e 70E0      		ldi r23,hi8(.LC2)
 784 0140 80E0      		ldi r24,0
 785 0142 90E0      		ldi r25,0
 786 0144 0E94 0000 		call strtok
 109:Src/driver/cpu_parser.c ****         pre_mode[0] = word[0];
 788               	.LM34:
 789 0148 FC01      		movw r30,r24
 790 014a 8081      		ld r24,Z
 791 014c 89A3      		std Y+33,r24
 110:Src/driver/cpu_parser.c ****         pre_mode[1] = '\0';
 793               	.LM35:
 794 014e 1AA2      		std Y+34,__zero_reg__
 111:Src/driver/cpu_parser.c ****         _cpuData.arg1 = atoi(pre_mode);
 796               	.LM36:
 797 0150 C701      		movw r24,r14
 798 0152 0E94 0000 		call atoi
 799 0156 8093 0000 		sts _cpuData,r24
 800 015a 9093 0000 		sts _cpuData+1,r25
 112:Src/driver/cpu_parser.c ****         spew("1 - %d\n", _cpuData.arg1);
 802               	.LM37:
 803 015e 9F93      		push r25
 804 0160 8F93      		push r24
 805 0162 80E0      		ldi r24,lo8(.LC3)
 806 0164 90E0      		ldi r25,hi8(.LC3)
 807 0166 9F93      		push r25
 808 0168 8F93      		push r24
 809 016a 0E94 0000 		call spew
 113:Src/driver/cpu_parser.c **** 
 114:Src/driver/cpu_parser.c ****         word = strtok(NULL, ",");
 811               	.LM38:
 812 016e 60E0      		ldi r22,lo8(.LC2)
 813 0170 70E0      		ldi r23,hi8(.LC2)
 814 0172 80E0      		ldi r24,0
 815 0174 90E0      		ldi r25,0
 816 0176 0E94 0000 		call strtok
 115:Src/driver/cpu_parser.c ****         char rx_arg2[16];
 116:Src/driver/cpu_parser.c ****         sprintf(rx_arg2, "%s", word);
 818               	.LM39:
 819 017a 9F93      		push r25
 820 017c 8F93      		push r24
 821 017e 1F93      		push r17
 822 0180 0F93      		push r16
 823 0182 7E01      		movw r14,r28
 824 0184 F1E1      		ldi r31,17
 825 0186 EF0E      		add r14,r31
 826 0188 F11C      		adc r15,__zero_reg__
 827 018a FF92      		push r15
 828 018c EF92      		push r14
 829 018e 0E94 0000 		call sprintf
 117:Src/driver/cpu_parser.c ****         rx_arg2[strlen(rx_arg2)] = '\0';
 831               	.LM40:
 832 0192 C701      		movw r24,r14
 833 0194 0E94 0000 		call strlen
 834 0198 8E0D      		add r24,r14
 835 019a 9F1D      		adc r25,r15
 836 019c FC01      		movw r30,r24
 837 019e 1082      		st Z,__zero_reg__
 118:Src/driver/cpu_parser.c **** 
 119:Src/driver/cpu_parser.c ****         _cpuData.arg2 = atoi(rx_arg2);
 839               	.LM41:
 840 01a0 C701      		movw r24,r14
 841 01a2 0E94 0000 		call atoi
 842 01a6 8093 0000 		sts _cpuData+2,r24
 843 01aa 9093 0000 		sts _cpuData+3,r25
 120:Src/driver/cpu_parser.c ****         spew("2 - %d\n", _cpuData.arg2);
 845               	.LM42:
 846 01ae 9F93      		push r25
 847 01b0 8F93      		push r24
 848 01b2 80E0      		ldi r24,lo8(.LC4)
 849 01b4 90E0      		ldi r25,hi8(.LC4)
 850 01b6 9F93      		push r25
 851 01b8 8F93      		push r24
 852 01ba 0E94 0000 		call spew
 121:Src/driver/cpu_parser.c **** 
 122:Src/driver/cpu_parser.c ****         word = strtok(NULL, ",");
 854               	.LM43:
 855 01be 60E0      		ldi r22,lo8(.LC2)
 856 01c0 70E0      		ldi r23,hi8(.LC2)
 857 01c2 80E0      		ldi r24,0
 858 01c4 90E0      		ldi r25,0
 859 01c6 0E94 0000 		call strtok
 123:Src/driver/cpu_parser.c ****         char rx_arg3[16];
 124:Src/driver/cpu_parser.c ****         sprintf(rx_arg3, "%s", word);
 861               	.LM44:
 862 01ca 9F93      		push r25
 863 01cc 8F93      		push r24
 864 01ce 1F93      		push r17
 865 01d0 0F93      		push r16
 866 01d2 8E01      		movw r16,r28
 867 01d4 0F5F      		subi r16,-1
 868 01d6 1F4F      		sbci r17,-1
 869 01d8 1F93      		push r17
 870 01da 0F93      		push r16
 871 01dc 0E94 0000 		call sprintf
 125:Src/driver/cpu_parser.c ****         rx_arg3[strlen(rx_arg3)] = '\0';
 873               	.LM45:
 874 01e0 C801      		movw r24,r16
 875 01e2 0E94 0000 		call strlen
 876 01e6 800F      		add r24,r16
 877 01e8 911F      		adc r25,r17
 878 01ea FC01      		movw r30,r24
 879 01ec 1082      		st Z,__zero_reg__
 126:Src/driver/cpu_parser.c **** 
 127:Src/driver/cpu_parser.c ****         _cpuData.arg3 = atoi(rx_arg3);
 881               	.LM46:
 882 01ee C801      		movw r24,r16
 883 01f0 0E94 0000 		call atoi
 884 01f4 8093 0000 		sts _cpuData+4,r24
 885 01f8 9093 0000 		sts _cpuData+5,r25
 128:Src/driver/cpu_parser.c ****         spew("3 - %d\n", _cpuData.arg3);
 887               	.LM47:
 888 01fc 9F93      		push r25
 889 01fe 8F93      		push r24
 890 0200 80E0      		ldi r24,lo8(.LC5)
 891 0202 90E0      		ldi r25,hi8(.LC5)
 892 0204 9F93      		push r25
 893 0206 8F93      		push r24
 894 0208 0E94 0000 		call spew
 129:Src/driver/cpu_parser.c **** 
 130:Src/driver/cpu_parser.c ****         //DO STUFF!
 131:Src/driver/cpu_parser.c ****         GPIO_SET(LED);
 896               	.LM48:
 897 020c 60E0      		ldi r22,0
 898 020e 80E4      		ldi r24,lo8(64)
 899 0210 96E0      		ldi r25,lo8(6)
 900 0212 0E94 0000 		call gpio_set_np
 132:Src/driver/cpu_parser.c ****         break;
 902               	.LM49:
 903 0216 CDBF      		out __SP_L__,r28
 904 0218 DEBF      		out __SP_H__,r29
 905 021a 00C0      		rjmp .L12
 906               	.L14:
 133:Src/driver/cpu_parser.c **** 
 134:Src/driver/cpu_parser.c ****     case STOP:
 135:Src/driver/cpu_parser.c ****         GPIO_CLR(LED);
 908               	.LM50:
 909 021c 60E0      		ldi r22,0
 910 021e 80E4      		ldi r24,lo8(64)
 911 0220 96E0      		ldi r25,lo8(6)
 912 0222 0E94 0000 		call gpio_clr_np
 913               	.L12:
 914               	/* epilogue start */
 915               	.LBE4:
 136:Src/driver/cpu_parser.c ****         break;
 137:Src/driver/cpu_parser.c **** 
 138:Src/driver/cpu_parser.c ****     default:
 139:Src/driver/cpu_parser.c ****         break;
 140:Src/driver/cpu_parser.c ****     }
 141:Src/driver/cpu_parser.c **** }
 917               	.LM51:
 918 0226 A296      		adiw r28,34
 919 0228 CDBF      		out __SP_L__,r28
 920 022a DEBF      		out __SP_H__,r29
 921 022c DF91      		pop r29
 922 022e CF91      		pop r28
 923 0230 1F91      		pop r17
 924 0232 0F91      		pop r16
 925 0234 FF90      		pop r15
 926 0236 EF90      		pop r14
 927 0238 0895      		ret
 936               	.Lscope3:
 938               		.stabd	78,0,0
 940               	.global	get_new_command
 942               	get_new_command:
 943               		.stabd	46,0,0
 142:Src/driver/cpu_parser.c **** 
 143:Src/driver/cpu_parser.c **** bool get_new_command(void)
 144:Src/driver/cpu_parser.c **** {
 945               	.LM52:
 946               	.LFBB4:
 947 023a CF93      		push r28
 948               	/* prologue: function */
 949               	/* frame size = 0 */
 950               	/* stack size = 1 */
 951               	.L__stack_usage = 1
 145:Src/driver/cpu_parser.c ****     if (new_command)
 953               	.LM53:
 954 023c C091 0000 		lds r28,new_command
 955 0240 CC23      		tst r28
 956 0242 01F0      		breq .L17
 146:Src/driver/cpu_parser.c ****     {
 147:Src/driver/cpu_parser.c ****         parse_cpu_data_rx(get_cpu_cmd());
 958               	.LM54:
 959 0244 80E0      		ldi r24,lo8(data_cpu_cmd)
 960 0246 90E0      		ldi r25,hi8(data_cpu_cmd)
 961 0248 0E94 0000 		call parse_cpu_data_rx
 148:Src/driver/cpu_parser.c ****         //spew("cmd: %d, %d, %d\n", _cpuData.arg1, _cpuData.arg2, _cpuData.arg3);
 149:Src/driver/cpu_parser.c ****         new_command = false;
 963               	.LM55:
 964 024c 1092 0000 		sts new_command,__zero_reg__
 965               	.L17:
 150:Src/driver/cpu_parser.c ****         //new_command_read();
 151:Src/driver/cpu_parser.c ****         return true;
 152:Src/driver/cpu_parser.c ****     }
 153:Src/driver/cpu_parser.c ****     else
 154:Src/driver/cpu_parser.c ****     {
 155:Src/driver/cpu_parser.c ****         return false;
 156:Src/driver/cpu_parser.c ****     }
 157:Src/driver/cpu_parser.c **** }
 967               	.LM56:
 968 0250 8C2F      		mov r24,r28
 969               	/* epilogue start */
 970 0252 CF91      		pop r28
 971 0254 0895      		ret
 973               	.Lscope4:
 975               		.stabd	78,0,0
 977               	.global	get_cpu_cmd
 979               	get_cpu_cmd:
 980               		.stabd	46,0,0
 158:Src/driver/cpu_parser.c **** 
 159:Src/driver/cpu_parser.c **** char *get_cpu_cmd() // NOT WORKING... :(
 160:Src/driver/cpu_parser.c **** {
 982               	.LM57:
 983               	.LFBB5:
 984               	/* prologue: function */
 985               	/* frame size = 0 */
 986               	/* stack size = 0 */
 987               	.L__stack_usage = 0
 161:Src/driver/cpu_parser.c ****     return data_cpu_cmd;
 162:Src/driver/cpu_parser.c **** }
 989               	.LM58:
 990 0256 80E0      		ldi r24,lo8(data_cpu_cmd)
 991 0258 90E0      		ldi r25,hi8(data_cpu_cmd)
 992 025a 0895      		ret
 994               	.Lscope5:
 996               		.stabd	78,0,0
 998               	.global	new_command_read
 1000               	new_command_read:
 1001               		.stabd	46,0,0
 163:Src/driver/cpu_parser.c **** 
 164:Src/driver/cpu_parser.c **** void new_command_read()
 165:Src/driver/cpu_parser.c **** {
 1003               	.LM59:
 1004               	.LFBB6:
 1005               	/* prologue: function */
 1006               	/* frame size = 0 */
 1007               	/* stack size = 0 */
 1008               	.L__stack_usage = 0
 166:Src/driver/cpu_parser.c ****     new_command = false;
 1010               	.LM60:
 1011 025c 1092 0000 		sts new_command,__zero_reg__
 1012 0260 0895      		ret
 1014               	.Lscope6:
 1016               		.stabd	78,0,0
 1017               	.global	new_command
 1018               		.section .bss
 1021               	new_command:
 1022 0000 00        		.zero	1
 1023               	.global	cnt_cpu
 1026               	cnt_cpu:
 1027 0001 00        		.zero	1
 1028               		.comm	data_cpu_cmd,32,1
 1029               		.comm	data_cpu_rx,32,1
 1030               	.global	parser_mode
 1033               	parser_mode:
 1034 0002 00        		.zero	1
 1035               		.comm	csum_cpu,1,1
 1036               		.comm	text_to_send_cpu,16,1
 1037               	.global	is_preamble
 1038               		.data
 1041               	is_preamble:
 1042 0000 01        		.byte	1
 1043               	.global	all_mode
 1044               		.section	.rodata.str1.1
 1045               	.LC6:
 1046 0034 6100      		.string	"a"
 1047               		.data
 1050               	all_mode:
 1051 0001 0000      		.word	.LC6
 1052               	.global	state_mode
 1053               		.section	.rodata.str1.1
 1054               	.LC7:
 1055 0036 7300      		.string	"s"
 1056               		.data
 1059               	state_mode:
 1060 0003 0000      		.word	.LC7
 1061               		.comm	_cpuData,6,1
 1073               		.text
 1075               	.Letext0:
 1076               		.ident	"GCC: (GNU) 5.4.0"
 1077               	.global __do_copy_data
 1078               	.global __do_clear_bss
DEFINED SYMBOLS
                            *ABS*:0000000000000000 cpu_parser.c
     /tmp/ccYsEaXG.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/ccYsEaXG.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/ccYsEaXG.s:4      *ABS*:000000000000003f __SREG__
     /tmp/ccYsEaXG.s:5      *ABS*:0000000000000034 __CCP__
     /tmp/ccYsEaXG.s:6      *ABS*:0000000000000000 __tmp_reg__
     /tmp/ccYsEaXG.s:7      *ABS*:0000000000000001 __zero_reg__
     /tmp/ccYsEaXG.s:509    .text:0000000000000000 CRC8_CPU
     /tmp/ccYsEaXG.s:562    .text:000000000000001c cpu_parser
     /tmp/ccYsEaXG.s:1033   .bss:0000000000000002 parser_mode
     /tmp/ccYsEaXG.s:1026   .bss:0000000000000001 cnt_cpu
                            *COM*:0000000000000020 data_cpu_rx
                            *COM*:0000000000000001 csum_cpu
                            *COM*:0000000000000020 data_cpu_cmd
     /tmp/ccYsEaXG.s:1021   .bss:0000000000000000 new_command
     /tmp/ccYsEaXG.s:717    .text:00000000000000dc parse_cpu_data_rx
                            *COM*:0000000000000006 _cpuData
     /tmp/ccYsEaXG.s:942    .text:000000000000023a get_new_command
     /tmp/ccYsEaXG.s:979    .text:0000000000000256 get_cpu_cmd
     /tmp/ccYsEaXG.s:1000   .text:000000000000025c new_command_read
                            *COM*:0000000000000010 text_to_send_cpu
     /tmp/ccYsEaXG.s:1041   .data:0000000000000000 is_preamble
     /tmp/ccYsEaXG.s:1050   .data:0000000000000001 all_mode
     /tmp/ccYsEaXG.s:1059   .data:0000000000000003 state_mode

UNDEFINED SYMBOLS
memset
sprintf
spew
strtok
atoi
strlen
gpio_set_np
gpio_clr_np
__do_copy_data
__do_clear_bss
